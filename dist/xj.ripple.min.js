/** xj.ripple(点击波纹特效) | V0.3.0 | Apache Licence 2.0 | 2018-2021 © XJ.Chen | https://github.com/xjZone/xj.ripple */
!function(a,b){"function"!=typeof define||void 0===define.amd&&void 0===define.cmd?"undefined"!=typeof module&&"object"==typeof exports?module.exports=b():(a=a||self,a.xj||(a.xj={}),a.xj.ripple=b()):define(b)}(this,function(){"use strict";var a,b,c,d,e,f,h,i,j,k,n,o,p,q,r,s,t;return!function(){var a=window.Element.prototype;"function"!=typeof a.matches&&(a.matches=a.msMatchesSelector||a.mozMatchesSelector||a.webkitMatchesSelector||function(a){for(var b=this,c=(b.document||b.ownerDocument).querySelectorAll(a),d=0;c[d]&&c[d]!==b;)++d;return Boolean(c[d])}),"function"!=typeof a.closest&&(a.closest=function(a){for(var b=this;b&&1===b.nodeType;){if(b.matches(a))return b;b=b.parentNode}return null})}(),!function(){a=function(a,b){var c,d;return a.classList?a.classList.contains(b):(c=a.getAttribute("class"),d=c?c.split(/\s+/):[],-1===d.indexOf(b)?!1:!0)},b=function(a,b){var c,d;return a.classList?a.classList.add(b):(c=a.getAttribute("class"),d=c?c.split(/\s+/):[],0===d.length?a.setAttribute("class",b):-1===d.indexOf(b)&&a.setAttribute("class",d.join(" ")+" "+b),void 0)},c=function(a,b){var c,d;return a.classList?a.classList.remove(b):(c=a.getAttribute("class"),d=c?c.split(/\s+/):[],c="",-1!==d.indexOf(b)&&(d.forEach(function(a){a!==b&&(c+=a+" ")}),a.setAttribute("class",c.trim())),void 0)}}(),d="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof self?self:global,e=function(){},f="0.3.0",h={classTarget:document.documentElement,existClass:"xj-ripple-exist",defaultClass:".xj-ripple, .xj-ripple-out",specialClass:".xj-ripple-mid, .xj-ripple-out-mid"},i={debug:!1,append:!0,mouse:[0],forbid:!0,inherit:!0,nodeName:"xj-ripple",classString:"",styleString:"",opacity:"0.375",radius:"50%",color:"currentColor",width:"auto",height:"auto",minWidth:"0px",minHeight:"0px",maxWidth:"none",maxHeight:"none",extraWidth:"0px",extraHeight:"0px",left:"auto",top:"auto",offsetLeft:"0px",offsetTop:"0px",transitionProperty:"transform, opacity",transitionDuration:"500ms",transitionTimingFunction:"ease-out",transitionDelay:"0ms, 125ms",specialRatio:1.5,createBefore:e,createAfter:e,removeCallback:e,insertTarget:"auto"},void 0===d.xj&&(d.xj={}),void 0===d.xj.rippleReturn&&(d.xj.rippleReturn={}),void 0!==d.xj.rippleReturn[f]?d.xj.rippleReturn[f]:(void 0===d.xj.rippleConfig&&(d.xj.rippleConfig={}),void 0===d.xj.rippleOption&&(d.xj.rippleOption={}),void 0!==d.xj.rippleConfig[f]&&Object.keys(d.xj.rippleConfig[f]).forEach(function(a){h[a]=d.xj.rippleConfig[f][a]}),void 0!==d.xj.rippleOption[f]&&Object.keys(d.xj.rippleOption[f]).forEach(function(a){i[a]=d.xj.rippleOption[f][a]}),j=d,k=j.document,k.documentElement,k.body,n=null,o=null,n=k.createElement("xj-ripple-temporary"),n.setAttribute("id","xj-ripple-temporary"),p=k.documentMode||/edge|firefox/i.test(navigator.userAgent),q="ontouchstart"in j,r=!1,s=function(a){return/px$/i.test(a)?!0:!1},t=function(b,c,d,f){var g={},h=[],l=c,m="",r=c.parentElement,t=!1,u=0,v=0,w=0,x=0,y=0,z=0,A=0,B=0,C=0,D=0,E=null,F="",G="1, 1",H=e,I=e,J=e;if(null===l.closest("svg")){for(;null!==l;)(m=l.getAttribute("xj-ripple"))&&h.unshift(eval("("+m+")")),l=l.hasAttribute("xj-ripple")===!1||void 0===h[0].inherit||h[0].inherit===!0?l.parentElement:null;if(f&&h.unshift(f),h.unshift(i),h.forEach(function(a){Object.keys(a).forEach(function(b){g[b]=a[b]})}),!(b&&"mousedown"===b.type&&-1===g.mouse.indexOf(b.button)||"auto"!==g.insertTarget&&("function"==typeof g.insertTarget?c=g.insertTarget(c):0===g.insertTarget.indexOf("parent")?c=c.parentElement.querySelector(g.insertTarget.replace(/^parent\s*/,"")):0===g.insertTarget.indexOf("self")?c=c.querySelector(g.insertTarget.replace(/^self\s*/,"")):/^self|parent/i.test(g.insertTarget)===!1&&(c=k.querySelector(g.insertTarget)),null===c||void 0===c||c instanceof Element==!1))){if(g.forbid===!0){for(;null!==r&&t===!1;)r.disabled===!0||r.hasAttribute("disabled")===!0||a(r,"xj-ripple-disabled")===!0||"not-allowed"===j.getComputedStyle(r).cursor?t=!0:r=r.parentElement;if(t===!0)return}u=c.clientWidth,v=c.clientHeight,w=u/2,x=v/2,d===!1&&"auto"===g.insertTarget&&(g.append===!0?c.appendChild(n):c.insertBefore(n,c.firstChild),o=n.getBoundingClientRect(),w=(b.clientX?b.clientX:b.changedTouches[0].clientX)-o.left,x=(b.clientY?b.clientY:b.changedTouches[0].clientY)-o.top,g.debug===!1&&c.removeChild(n)),"auto"!==g.left&&(w=s(g.left)===!0?parseFloat(g.left):parseFloat(g.left)*u/100),"auto"!==g.top&&(x=s(g.top)===!0?parseFloat(g.top):parseFloat(g.top)*v/100),y=z=d===!0||"auto"!==g.insertTarget?Math.ceil(Math.max(u,v))*g.specialRatio:2*Math.ceil(Math.sqrt(Math.max(Math.pow(w,2)+Math.pow(x,2),Math.pow(u-w,2)+Math.pow(x,2),Math.pow(u-w,2)+Math.pow(v-x,2),Math.pow(w,2)+Math.pow(v-x,2)))),"auto"!==g.width&&(y=s(g.width)?parseFloat(g.width):parseFloat(g.width)*u/100),"auto"!==g.height&&(z=s(g.height)?parseFloat(g.height):parseFloat(g.height)*v/100),"0px"!==g.extraWidth&&(y+=s(g.extraWidth)?parseFloat(g.extraWidth):parseFloat(g.extraWidth)*u/100),"0px"!==g.extraHeight&&(z+=s(g.extraHeight)?parseFloat(g.extraHeight):parseFloat(g.extraHeight)*v/100),"none"!==g.maxWidth&&(A=s(g.maxWidth)?parseFloat(g.maxWidth):parseFloat(g.maxWidth)*u/100,y>A&&(y=A)),"none"!==g.maxHeight&&(B=s(g.maxHeight)?parseFloat(g.maxHeight):parseFloat(g.maxHeight)*v/100,z>B&&(z=B)),"0px"!==g.minWidth&&(C=s(g.minWidth)?parseFloat(g.minWidth):parseFloat(g.minWidth)*u/100,C>y&&(y=C)),"0px"!==g.minHeight&&(D=s(g.minHeight)?parseFloat(g.minHeight):parseFloat(g.minHeight)*v/100,D>z&&(z=D)),"0px"!==g.offsetLeft&&(w+=s(g.offsetLeft)?parseFloat(g.offsetLeft):parseFloat(g.offsetLeft)*u/100),"0px"!==g.offsetTop&&(x+=s(g.offsetTop)?parseFloat(g.offsetTop):parseFloat(g.offsetTop)*v/100),w>u-1&&(w=u-1),x>v-1&&(x=v-1),0>w&&(w=0),0>x&&(x=0),E=k.createElement(g.nodeName),E.setAttribute("class","xj-ripple-element"+(g.classString?" "+g.classString:"")),F=g.styleString,"0.375"!==g.opacity&&(F+="opacity:"+g.opacity+";"),"50%"!==g.radius&&(F+="border-radius:"+g.radius+";"),"currentColor"!==g.color&&(F+="color:"+g.color+";"),"transform, opacity"!==g.transitionProperty&&(F+="transition-property:"+g.transitionProperty+";"),"500ms"!==g.transitionDuration&&(F+="transition-duration:"+g.transitionDuration+";"),"ease-out"!==g.transitionTimingFunction&&(F+="transition-timing-function:"+g.transitionTimingFunction+";"),"0ms, 125ms"!==g.transitionDelay&&(F+="transition-delay:"+g.transitionDelay+";"),F+="box-shadow:0 0 0 "+Math.max(y,z)/2+"px currentColor;",F+="left:"+w+"px;"+"top:"+x+"px;",E.setAttribute("style",F),y>z&&(G="1, "+z/y),z>y&&(G=y/z+", 1"),H=function(){p===!1&&q===!1&&(E.style.transform="scale(0, 0)")},I=function(){p===!1&&q===!1&&(E.style.transform="scale("+G+")")},J=function(){null!==b&&(c.removeEventListener("mouseleave",H,!0),c.removeEventListener("mouseenter",I,!0),k.removeEventListener("mouseup",J,!0)),E.addEventListener("transitionend",function(a){"opacity"==a.propertyName&&(g.debug===!1&&c.removeChild(E),g.removeCallback(a,E))},!0),E.style.opacity="0"},null!==b&&(c.addEventListener("mouseleave",H,!0),c.addEventListener("mouseenter",I,!0),k.addEventListener("mouseup",J,!0)),g.createBefore(b,E),g.append===!0?c.appendChild(E):c.insertBefore(E,c.firstChild),g.createAfter(b,E),E.clientWidth,E.style.transform="scale("+G+")",(null===b||"object"==typeof b&&"touchend"===b.type)&&J()}}},q===!0&&(k.addEventListener("touchstart",function(){r=!1},!0),k.addEventListener("touchmove",function(){r=!0},!0)),k.addEventListener(q===!0?"touchend":"mousedown",function(b){var c=null,d=void 0;(q!==!0||r!==!0)&&b.isTrusted!==!1&&1===b.target.nodeType&&((c=b.target.closest(h.specialClass))?d=!0:(c=b.target.closest(h.defaultClass))&&(d=!1),null!==c&&void 0!==d&&c.disabled!==!0&&c.hasAttribute("disabled")!==!0&&a(c,"xj-ripple-disabled")!==!0&&"not-allowed"!==j.getComputedStyle(c).cursor&&t(b,c,d,null))},!0),null!==h.classTarget&&""!==h.existClass&&b(h.classTarget,h.existClass),d.xj.rippleReturn[f]={version:f,create:function(a,b){t(null,a,!0,b)}})});
