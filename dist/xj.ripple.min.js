/** xj.ripple(点击波纹特效) | V0.3.2 | Apache Licence 2.0 | 2018-2021 © XJ.Chen | https://github.com/xjZone/xj.ripple */
!function(a,b){"function"!=typeof define||void 0===define.amd&&void 0===define.cmd?"undefined"!=typeof module&&"object"==typeof exports?module.exports=b():(a=a||self,a.xj||(a.xj={}),a.xj.ripple=b()):define(b)}(this,function(){"use strict";var a,b,c,d,e,f,h,i,j,k,n,o,p,q,r,s,t;return!function(){var a=window.Element.prototype;"function"!=typeof a.matches&&(a.matches=a.msMatchesSelector||a.mozMatchesSelector||a.webkitMatchesSelector||function(a){for(var b=this,c=(b.document||b.ownerDocument).querySelectorAll(a),d=0;c[d]&&c[d]!==b;)++d;return Boolean(c[d])}),"function"!=typeof a.closest&&(a.closest=function(a){for(var b=this;b&&1===b.nodeType;){if(b.matches(a))return b;b=b.parentNode}return null})}(),!function(){a=function(a,b){var c,d;return a.classList?a.classList.contains(b):(c=a.getAttribute("class"),d=c?c.split(/\s+/):[],-1===d.indexOf(b)?!1:!0)},b=function(a,b){var c,d;return a.classList?a.classList.add(b):(c=a.getAttribute("class"),d=c?c.split(/\s+/):[],0===d.length?a.setAttribute("class",b):-1===d.indexOf(b)&&a.setAttribute("class",d.join(" ")+" "+b),void 0)},c=function(a,b){var c,d;return a.classList?a.classList.remove(b):(c=a.getAttribute("class"),d=c?c.split(/\s+/):[],c="",-1!==d.indexOf(b)&&(d.forEach(function(a){a!==b&&(c+=a+" ")}),a.setAttribute("class",c.trim())),void 0)}}(),d="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof self?self:global,e=function(){},f="0.3.2",h={classTarget:document.documentElement,existClass:"xj-ripple-exist",defaultSelector:".xj-ripple, .xj-ripple-out, button, .button, .xjButton",specialSelector:".xj-ripple-mid, .xj-ripple-out-mid, .xjRadio-icon, .xjCheckbox-icon, .xjSwitch-icon",ignoreSelector:"img, input, textarea, select, area, audio, video, track"},i={debug:!1,append:!0,mouse:[0],forbid:!0,inherit:!0,nodeName:"xj-ripple",classString:"",styleString:"",opacity:"0.375",radius:"50%",color:"currentColor",width:"auto",height:"auto",minWidth:"0px",minHeight:"0px",maxWidth:"none",maxHeight:"none",extraWidth:"0px",extraHeight:"0px",left:"auto",top:"auto",offsetLeft:"0px",offsetTop:"0px",transitionProperty:"transform, opacity",transitionDuration:"500ms",transitionTimingFunction:"ease-out",transitionDelay:"0ms, 125ms",specialRatio:1.5,createBefore:e,createAfter:e,removeCallback:e,insertTarget:"auto"},void 0===d.xj&&(d.xj={}),void 0===d.xj.rippleReturn&&(d.xj.rippleReturn={}),void 0!==d.xj.rippleReturn[f]?d.xj.rippleReturn[f]:(void 0===d.xj.rippleConfig&&(d.xj.rippleConfig={}),void 0===d.xj.rippleOption&&(d.xj.rippleOption={}),void 0!==d.xj.rippleConfig[f]&&Object.keys(d.xj.rippleConfig[f]).forEach(function(a){h[a]=d.xj.rippleConfig[f][a]}),void 0!==d.xj.rippleOption[f]&&Object.keys(d.xj.rippleOption[f]).forEach(function(a){i[a]=d.xj.rippleOption[f][a]}),j=d,k=j.document,k.documentElement,k.body,n=null,o=null,n=k.createElement("xj-ripple-temporary"),n.setAttribute("id","xj-ripple-temporary"),p=k.documentMode||/edge|firefox/i.test(navigator.userAgent),q="ontouchstart"in k,r=!1,s=function(a){return/px$/i.test(a)?!0:!1},t=function(b,c,d,f){var g={},l=[],m=c,r="",t=c.parentElement,u=!1,v=0,w=0,x=0,y=0,z=0,A=0,B=0,C=0,D=0,E=0,F=null,G="os",H="1, 1",I=e,J=e,K=e;if(null===m.closest("svg")){for(;null!==m;)r=m.getAttribute("xj-ripple"),r&&l.unshift(eval("("+r+")")),m=m.hasAttribute("xj-ripple")===!1||void 0===l[0].inherit||l[0].inherit===!0?m.parentElement:null;if(f&&l.unshift(f),l.unshift(i),l.forEach(function(a){Object.keys(a).forEach(function(b){g[b]=a[b]})}),!(b&&"mousedown"===b.type&&-1===g.mouse.indexOf(b.button)||"auto"!==g.insertTarget&&("function"==typeof g.insertTarget?c=g.insertTarget(c):0===g.insertTarget.indexOf("parent")?c=c.parentElement.querySelector(g.insertTarget.replace(/^parent\s*/,"")):0===g.insertTarget.indexOf("self")?c=c.querySelector(g.insertTarget.replace(/^self\s*/,"")):/^self|parent/i.test(g.insertTarget)===!1&&(c=k.querySelector(g.insertTarget)),null===c||void 0===c||c instanceof Element==!1)||c.matches(h.ignoreSelector)===!0||"static"===j.getComputedStyle(c).position)){if(g.forbid===!0){for(;null!==t&&u!==!0;)t.disabled===!0||t.hasAttribute("disabled")===!0||a(t,"xj-ripple-disabled")===!0||"not-allowed"===j.getComputedStyle(t).cursor?u=!0:t=t.parentElement;if(u===!0)return}v=c.clientWidth,w=c.clientHeight,x=v/2,y=w/2,d===!1&&"auto"===g.insertTarget&&(g.append===!0?c.appendChild(n):c.insertBefore(n,c.firstChild),o=n.getBoundingClientRect(),x=(b.clientX?b.clientX:b.changedTouches[0].clientX)-o.left,y=(b.clientY?b.clientY:b.changedTouches[0].clientY)-o.top,g.debug!==!0&&c.removeChild(n)),"auto"!==g.left&&(x=s(g.left)?parseFloat(g.left):parseFloat(g.left)*v/100),"auto"!==g.top&&(y=s(g.top)?parseFloat(g.top):parseFloat(g.top)*w/100),z=A=d===!0||"auto"!==g.insertTarget?Math.ceil(Math.max(v,w))*g.specialRatio:2*Math.ceil(Math.sqrt(Math.max(Math.pow(x,2)+Math.pow(y,2),Math.pow(v-x,2)+Math.pow(y,2),Math.pow(v-x,2)+Math.pow(w-y,2),Math.pow(x,2)+Math.pow(w-y,2)))),"auto"!==g.width&&(z=s(g.width)?parseFloat(g.width):parseFloat(g.width)*v/100),"auto"!==g.height&&(A=s(g.height)?parseFloat(g.height):parseFloat(g.height)*w/100),"0px"!==g.extraWidth&&(z+=s(g.extraWidth)?parseFloat(g.extraWidth):parseFloat(g.extraWidth)*v/100),"0px"!==g.extraHeight&&(A+=s(g.extraHeight)?parseFloat(g.extraHeight):parseFloat(g.extraHeight)*w/100),"none"!==g.maxWidth&&(B=s(g.maxWidth)?parseFloat(g.maxWidth):parseFloat(g.maxWidth)*v/100,z>B&&(z=B)),"none"!==g.maxHeight&&(C=s(g.maxHeight)?parseFloat(g.maxHeight):parseFloat(g.maxHeight)*w/100,A>C&&(A=C)),"0px"!==g.minWidth&&(D=s(g.minWidth)?parseFloat(g.minWidth):parseFloat(g.minWidth)*v/100,D>z&&(z=D)),"0px"!==g.minHeight&&(E=s(g.minHeight)?parseFloat(g.minHeight):parseFloat(g.minHeight)*w/100,E>A&&(A=E)),"0px"!==g.offsetLeft&&(x+=s(g.offsetLeft)?parseFloat(g.offsetLeft):parseFloat(g.offsetLeft)*v/100),"0px"!==g.offsetTop&&(y+=s(g.offsetTop)?parseFloat(g.offsetTop):parseFloat(g.offsetTop)*w/100),x>v-1&&(x=v-1),y>w-1&&(y=w-1),0>x&&(x=0),0>y&&(y=0),F=k.createElement(g.nodeName),F.setAttribute("class","xj-ripple-element"+(g.classString?" "+g.classString:"")),G=g.styleString,"0.375"!==g.opacity&&(G+="opacity: "+g.opacity+";"),"50%"!==g.radius&&(G+="border-radius:"+g.radius+";"),"currentColor"!==g.color&&(G+="color:"+g.color+";"),"transform, opacity"!==g.transitionProperty&&(G+="transition-property:"+g.transitionProperty+";"),"500ms"!==g.transitionDuration&&(G+="transition-duration:"+g.transitionDuration+";"),"ease-out"!==g.transitionTimingFunction&&(G+="transition-timing-function:"+g.transitionTimingFunction+";"),"0ms, 125ms"!==g.transitionDelay&&(G+="transition-delay:"+g.transitionDelay+";"),G+="box-shadow:0 0 0 "+Math.max(z,A)/2+"px currentColor;",G+="left:"+x+"px;"+"top:"+y+"px;",F.setAttribute("style",G),z>A&&(H="1, "+A/z),A>z&&(H=z/A+", 1"),I=function(){p===!1&&q===!1&&(F.style.transform="scale(0, 0)")},J=function(){p===!1&&q===!1&&(F.style.transform="scale("+H+")")},K=function(){null!==b&&(c.removeEventListener("mouseleave",I,!0),c.removeEventListener("mouseenter",J,!0),k.removeEventListener("mouseup",K,!0)),F.addEventListener("transitionend",function(a){"opacity"==a.propertyName&&(g.debug===!1&&c.removeChild(F),g.removeCallback(a,F))},!0),F.style.opacity="0"},null!==b&&(c.addEventListener("mouseleave",I,!0),c.addEventListener("mouseenter",J,!0),k.addEventListener("mouseup",K,!0)),g.createBefore(b,F),g.append===!0?c.appendChild(F):c.insertBefore(F,c.firstChild),g.createAfter(b,F),F.clientWidth,F.style.transform="scale("+H+")",(null===b||"object"==typeof b&&"touchend"===b.type)&&K()}}},q===!0&&(k.addEventListener("touchstart",function(){r=!1},!0),k.addEventListener("touchmove",function(){r=!0},!0)),k.addEventListener(q===!0?"touchend":"mousedown",function(b){var c=null,d=void 0;(q!==!0||r!==!0)&&b.isTrusted!==!1&&1===b.target.nodeType&&((c=b.target.closest(h.specialSelector))?d=!0:(c=b.target.closest(h.defaultSelector))&&(d=!1),null!==c&&void 0!==d&&c.disabled!==!0&&c.hasAttribute("disabled")!==!0&&a(c,"xj-ripple-disabled")!==!0&&"not-allowed"!==j.getComputedStyle(c).cursor&&t(b,c,d,null))},!0),null!==h.classTarget&&""!==h.existClass&&b(h.classTarget,h.existClass),d.xj.rippleReturn[f]={version:f,create:function(a,b){t(null,a,!0,b)}})});
